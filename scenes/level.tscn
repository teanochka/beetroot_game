[gd_scene load_steps=19 format=4 uid="uid://xlhfaujtotv5"]

[ext_resource type="Script" uid="uid://yo5h7bnavnfp" path="res://scripts/level.gd" id="1_ux5qa"]
[ext_resource type="Texture2D" uid="uid://c3v6tbasvm5xy" path="res://assets/background.png" id="2_8c41q"]
[ext_resource type="Texture2D" uid="uid://d22iojpjrcc6l" path="res://assets/ground_tiles.png" id="2_mx8sn"]
[ext_resource type="PackedScene" uid="uid://ot8tq08okngb" path="res://scenes/player.tscn" id="2_w8frs"]
[ext_resource type="PackedScene" uid="uid://dupkutwhga1jr" path="res://scenes/builder.tscn" id="4_arp2o"]
[ext_resource type="PackedScene" uid="uid://blnvwoutudek0" path="res://scenes/ui.tscn" id="4_mx8sn"]
[ext_resource type="PackedScene" uid="uid://6eoom28ynb61" path="res://scenes/building_ui.tscn" id="7_8c41q"]
[ext_resource type="AudioStream" uid="uid://dgkynexaebk7p" path="res://assets/SFX/ambient.mp3" id="9_wc255"]
[ext_resource type="PackedScene" uid="uid://p4aybl0isc0l" path="res://scenes/tutorial.tscn" id="11_t1rx8"]
[ext_resource type="PackedScene" uid="uid://b3panky5js3y5" path="res://scenes/conveyors/belt.tscn" id="13_64w2a"]
[ext_resource type="PackedScene" uid="uid://bebyktnp23ysv" path="res://scenes/generator.tscn" id="14_fpun6"]
[ext_resource type="PackedScene" uid="uid://6evlux51r022" path="res://scenes/ghost_controller.tscn" id="15_wc255"]
[ext_resource type="PackedScene" uid="uid://dskhw70rvg7p4" path="res://scenes/deconstructor.tscn" id="16_arp2o"]
[ext_resource type="PackedScene" uid="uid://eagcyjc724dh" path="res://scenes/conveyor_ui.tscn" id="16_ux5qa"]
[ext_resource type="PackedScene" uid="uid://d1uovhafhbgd6" path="res://scenes/audio_controller.tscn" id="17_ux5qa"]
[ext_resource type="PackedScene" uid="uid://ypense6xgocw" path="res://scenes/exporter.tscn" id="18_82cfe"]

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_b121j"]
texture = ExtResource("2_mx8sn")
0:0/0 = 0
1:0/0 = 0
0:1/0 = 0
1:1/0 = 0
2:0/0 = 0
2:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(8, -8, 8, 8, -8, 8, -8, -8)

[sub_resource type="TileSet" id="TileSet_8c41q"]
physics_layer_0/collision_layer = 1
sources/0 = SubResource("TileSetAtlasSource_b121j")

[node name="Level" type="Node2D" groups=["GameManager"]]
y_sort_enabled = true
texture_filter = 1
script = ExtResource("1_ux5qa")

[node name="Background" type="Parallax2D" parent="."]
z_index = -71
texture_repeat = 2
scroll_scale = Vector2(0.1, 0)
scroll_offset = Vector2(1973, -67)
repeat_size = Vector2(361, 70)
autoscroll = Vector2(0.1, 0)
repeat_times = 2
follow_viewport = false

[node name="Sprite2D" type="Sprite2D" parent="Background"]
position = Vector2(20, -81)
texture = ExtResource("2_8c41q")
offset = Vector2(0.5, -2)

[node name="TileMapLayer" type="TileMapLayer" parent="."]
z_index = -70
position = Vector2(7, -5)
tile_map_data = PackedByteArray("AAD9////AAAAAAAAAAD+////AAAAAAAAAAD/////AAAAAAAAAAAAAP//AAAAAAAAAAABAP//AAAAAAAAAAACAP//AAABAAAAAAADAP//AAABAAAAAAACAAAAAAABAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD//wAAAAAAAAAAAAD+/wAAAAAAAAAAAAD9/wAAAAAAAAAAAAD9//7/AAABAAAAAAD+//7/AAAAAAAAAAD///7/AAAAAAAAAAAAAP7/AAAAAAAAAAABAP7/AAAAAAAAAAACAP7/AAABAAAAAAADAP7/AAABAAAAAAAEAP7/AAABAAAAAAAEAP//AAABAAAAAAAEAAAAAAABAAAAAAADAAAAAAABAAAAAAD9/wEAAAABAAAAAAD+/wEAAAABAAAAAAD//wEAAAABAAAAAAAAAAEAAAABAAAAAAABAAEAAAAAAAAAAAACAAEAAAABAAAAAAADAAEAAAABAAAAAAAEAAEAAAABAAAAAAAFAP7/AAAAAAAAAAAGAP7/AAAAAAAAAAAHAP7/AAABAAEAAAAHAP//AAAAAAEAAAAGAP//AAAAAAAAAAAFAP//AAAAAAAAAAAFAAAAAAAAAAAAAAAFAAEAAAAAAAAAAAAGAAEAAAAAAAAAAAAHAAEAAAAAAAEAAAAHAAAAAAAAAAEAAAAGAAAAAAAAAAAAAAAHAAkAAAACAAAAAAD3/wYAAAABAAAAAAD4/wYAAAABAAAAAAD5/wYAAAABAAAAAAD9/wYAAAABAAAAAAD+/wYAAAABAAAAAAD//wYAAAABAAAAAAAAAAYAAAABAAAAAAABAAYAAAABAAAAAAACAAYAAAABAAAAAAADAAYAAAABAAAAAAAEAAYAAAABAAAAAAAFAAYAAAABAAAAAAAGAAYAAAABAAAAAAAHAAYAAAABAAAAAAAHAP3/AAABAAAAAAAGAP3/AAABAAAAAAAFAP3/AAABAAAAAAAEAP3/AAABAAAAAAADAP3/AAABAAAAAAACAP3/AAABAAAAAAABAP3/AAABAAAAAAAAAP3/AAABAAAAAAD///3/AAABAAAAAAD+//3/AAABAAAAAAD9//3/AAABAAAAAAD8//3/AAABAAAAAAD7//3/AAABAAAAAAD6//3/AAABAAAAAAD5//3/AAABAAAAAAD4//3/AAABAAAAAAD3//3/AAABAAAAAAD3/wIAAAABAAEAAAD3/wEAAAABAAEAAAD3/wAAAAABAAEAAAD3////AAABAAEAAAD3//7/AAABAAEAAAD4//7/AAABAAEAAAD4////AAABAAEAAAD4/wAAAAABAAEAAAD4/wEAAAABAAEAAAD4/wIAAAABAAEAAAD4/wMAAAAAAAEAAAD3/wMAAAAAAAAAAAD3/wQAAAABAAAAAAD3/wUAAAAAAAAAAAD4/wUAAAAAAAAAAAD4/wQAAAAAAAEAAAD5/wQAAAAAAAEAAAD5/wMAAAAAAAEAAAD5/wIAAAABAAEAAAD5/wEAAAABAAEAAAD5/wAAAAABAAEAAAD5////AAABAAEAAAD5//7/AAABAAEAAAD6//7/AAABAAAAAAD6////AAAAAAAAAAD6/wAAAAAAAAAAAAD6/wEAAAAAAAAAAAD6/wIAAAAAAAAAAAD6/wMAAAAAAAAAAAD6/wQAAAABAAAAAAD6/wUAAAAAAAAAAAD5/wUAAAAAAAAAAAD7/wUAAAABAAEAAAD7/wQAAAABAAEAAAD7/wMAAAABAAEAAAD7/wIAAAABAAAAAAD7/wEAAAABAAAAAAD7/wAAAAABAAAAAAD7////AAABAAAAAAD7//7/AAABAAAAAAD8//7/AAABAAAAAAD8////AAAAAAAAAAD8/wAAAAAAAAAAAAD8/wEAAAABAAAAAAD8/wIAAAABAAAAAAD8/wMAAAABAAEAAAD8/wQAAAABAAEAAAD8/wUAAAABAAEAAAD9/wUAAAABAAAAAAD9/wQAAAABAAAAAAD9/wMAAAABAAAAAAD9/wIAAAABAAAAAAD+/wIAAAABAAAAAAD+/wMAAAABAAAAAAD+/wQAAAABAAAAAAD+/wUAAAABAAAAAAD//wUAAAABAAAAAAD//wQAAAABAAAAAAD//wMAAAABAAAAAAD//wIAAAABAAAAAAAAAAIAAAABAAAAAAAAAAMAAAABAAAAAAAAAAQAAAABAAAAAAAAAAUAAAABAAAAAAABAAUAAAAAAAAAAAABAAQAAAAAAAAAAAABAAMAAAAAAAAAAAABAAIAAAAAAAAAAAACAAIAAAAAAAAAAAACAAMAAAAAAAAAAAACAAQAAAAAAAAAAAACAAUAAAAAAAAAAAADAAUAAAAAAAAAAAADAAQAAAAAAAAAAAADAAMAAAAAAAAAAAADAAIAAAAAAAAAAAAEAAIAAAAAAAAAAAAEAAMAAAAAAAAAAAAEAAQAAAAAAAAAAAAEAAUAAAAAAAAAAAAFAAUAAAAAAAAAAAAFAAQAAAAAAAAAAAAFAAMAAAAAAAAAAAAFAAIAAAAAAAAAAAAGAAIAAAAAAAAAAAAGAAMAAAAAAAAAAAAGAAQAAAAAAAAAAAAGAAUAAAAAAAAAAAAHAAUAAAAAAAAAAAAHAAQAAAAAAAAAAAAHAAMAAAAAAAAAAAAHAAIAAAAAAAAAAAAOAP3/AAACAAAAAAAOAP7/AAACAAAAAAAOAP//AAACAAAAAAAOAAAAAAACAAAAAAAOAAEAAAACAAAAAAAOAAIAAAACAAAAAAAOAAMAAAACAAAAAAAOAAQAAAACAAAAAAAPAP3/AAACAAAAAAAPAP7/AAACAAAAAAAPAP//AAACAAAAAAAPAAAAAAACAAAAAAAPAAEAAAACAAAAAAAPAAIAAAACAAAAAAAPAAMAAAACAAAAAAAPAAQAAAACAAAAAAAPAAUAAAACAAAAAAAPAAYAAAACAAAAAAD1//z/AAACAAAAAAD2//z/AAACAAAAAAD3//z/AAACAAAAAAD4//z/AAACAAAAAAD5//z/AAACAAAAAAD6//z/AAACAAAAAAD7//z/AAACAAAAAAD8//z/AAACAAAAAAD9//z/AAACAAAAAAD+//z/AAACAAAAAAD///z/AAACAAAAAAAAAPz/AAACAAAAAAABAPz/AAACAAAAAAACAPz/AAACAAAAAAADAPz/AAACAAAAAAAEAPz/AAACAAAAAAAFAPz/AAACAAAAAAAGAPz/AAACAAAAAAAHAPz/AAACAAAAAAAIAPz/AAACAAAAAAAJAPz/AAACAAAAAAAKAPz/AAACAAAAAAALAPz/AAACAAAAAAAMAPz/AAACAAAAAAANAPz/AAACAAAAAAAOAPz/AAACAAAAAAAPAPz/AAACAAAAAADy/wcAAAACAAAAAADy/wYAAAACAAAAAADy/wUAAAACAAAAAADy/wQAAAACAAAAAADy/wMAAAACAAAAAADy/wIAAAACAAAAAADy/wEAAAACAAAAAADy/wAAAAACAAAAAADy////AAACAAAAAADy//7/AAACAAAAAADy//3/AAACAAAAAADy/wgAAAACAAAAAAAOAAgAAAACAAAAAAAOAAkAAAACAAAAAAANAAkAAAACAAAAAAAMAAkAAAACAAAAAAALAAkAAAACAAAAAAAKAAkAAAACAAAAAAAJAAkAAAACAAAAAAAIAAkAAAACAAAAAAAGAAkAAAACAAAAAAAFAAkAAAACAAAAAAAEAAkAAAACAAAAAAADAAkAAAACAAAAAAACAAkAAAACAAAAAAABAAkAAAACAAAAAAAAAAkAAAACAAAAAAD//wkAAAACAAAAAAD+/wkAAAACAAAAAAD9/wkAAAACAAAAAAD8/wkAAAACAAAAAAD7/wkAAAACAAAAAAD6/wkAAAACAAAAAAD5/wkAAAACAAAAAAD4/wkAAAACAAAAAAD3/wkAAAACAAAAAAD2/wkAAAACAAAAAAD1/wkAAAACAAAAAADy/wkAAAACAAAAAADx//3/AAACAAAAAADx//z/AAACAAAAAADy//z/AAACAAAAAADz//z/AAACAAAAAADx//7/AAACAAAAAADx////AAACAAAAAADx/wAAAAACAAAAAAD0//z/AAACAAAAAAAOAAcAAAACAAAAAAD6/wYAAAABAAAAAAD7/wYAAAABAAEAAAD8/wYAAAABAAEAAAD2/wUAAAABAAAAAAD2/wQAAAABAAAAAAD2/wMAAAABAAAAAAD2/wIAAAABAAAAAAD2/wEAAAABAAAAAAD2//3/AAABAAAAAAD2//7/AAABAAAAAAD2////AAABAAAAAAD2/wAAAAABAAAAAAD2/wYAAAABAAAAAAD2/wcAAAACAAAAAAD3/wcAAAACAAAAAAD4/wcAAAACAAAAAAD5/wcAAAACAAAAAAD6/wcAAAACAAAAAAD7/wcAAAACAAAAAAD8/wcAAAACAAAAAAD9/wcAAAACAAAAAAD+/wcAAAACAAAAAAD//wcAAAACAAAAAAAAAAcAAAACAAAAAAABAAcAAAACAAAAAAACAAcAAAACAAAAAAADAAcAAAACAAAAAAAEAAcAAAACAAAAAAAFAAcAAAACAAAAAAAGAAcAAAACAAAAAAAHAAcAAAACAAAAAAAIAAcAAAACAAAAAAAIAP7/AAABAAAAAAAIAP//AAABAAAAAAAIAAAAAAABAAAAAAAIAAEAAAABAAAAAAAIAAIAAAABAAAAAAAIAAMAAAABAAAAAAAIAAQAAAABAAAAAAAIAAUAAAABAAAAAAAIAAYAAAABAAAAAAAIAP3/AAABAAAAAAD1//3/AAABAAAAAAD1//7/AAABAAAAAAD1////AAABAAAAAAD1/wAAAAABAAAAAAD1/wEAAAABAAAAAAD1/wIAAAABAAAAAAD1/wMAAAABAAAAAAD1/wQAAAABAAAAAAD1/wUAAAABAAAAAAD1/wYAAAABAAAAAAAJAP7/AAABAAAAAAAJAP//AAABAAAAAAAJAAAAAAABAAAAAAAJAAEAAAABAAAAAAAJAAIAAAABAAAAAAAJAAMAAAABAAAAAAAJAAQAAAABAAAAAAAJAAUAAAABAAAAAAAJAAYAAAABAAAAAAAJAP3/AAABAAAAAAD0//3/AAACAAAAAAD0//7/AAACAAAAAAD0////AAACAAAAAAD0/wAAAAACAAAAAAD0/wEAAAACAAAAAAD0/wIAAAACAAAAAAD0/wMAAAACAAAAAAD0/wQAAAACAAAAAAD0/wUAAAACAAAAAAD0/wYAAAACAAAAAAD0/wcAAAACAAAAAAD1/wcAAAACAAAAAAAJAAcAAAACAAAAAAAKAP3/AAACAAAAAAAKAP7/AAACAAAAAAAKAP//AAACAAAAAAAKAAAAAAACAAAAAAAKAAEAAAACAAAAAAAKAAIAAAACAAAAAAAKAAMAAAACAAAAAAAKAAQAAAACAAAAAAAKAAUAAAACAAAAAAAKAAYAAAACAAAAAAAKAAcAAAACAAAAAAA=")
tile_set = SubResource("TileSet_8c41q")

[node name="player" parent="." instance=ExtResource("2_w8frs")]

[node name="UI" parent="." instance=ExtResource("4_mx8sn")]

[node name="Buildings" type="Node2D" parent="."]

[node name="BuildingUI" parent="." instance=ExtResource("7_8c41q")]

[node name="Tutorial" parent="." groups=["Tutorial"] instance=ExtResource("11_t1rx8")]

[node name="AudioStreamPlayer2D" type="AudioStreamPlayer" parent="."]
stream = ExtResource("9_wc255")
volume_db = -5.0
autoplay = true
parameters/looping = true

[node name="Generator" parent="." instance=ExtResource("14_fpun6")]
position = Vector2(-64, -48)
directions = Array[int]([2, 3, 0])

[node name="Belt" parent="." instance=ExtResource("13_64w2a")]
position = Vector2(-48, -48)
is_protected = true
directions = Array[int]([3])

[node name="Exporter" parent="." instance=ExtResource("18_82cfe")]
position = Vector2(128, -48)
directions = Array[int]([1])

[node name="Builder" parent="." instance=ExtResource("4_arp2o")]
z_index = 20

[node name="Deconstructor" parent="." instance=ExtResource("16_arp2o")]

[node name="AudioController" parent="." instance=ExtResource("17_ux5qa")]

[node name="GhostController" parent="." instance=ExtResource("15_wc255")]

[node name="ConveyorUI" parent="." instance=ExtResource("16_ux5qa")]

[connection signal="building_selected" from="UI" to="Builder" method="_on_ui_building_selected"]
[connection signal="deconstruction_finished" from="UI" to="Deconstructor" method="_on_ui_deconstruction_finished"]
[connection signal="deconstruction_started" from="UI" to="Deconstructor" method="_on_ui_deconstruction_started"]
[connection signal="item_sold" from="Exporter" to="UI" method="_on_exporter_item_sold"]
[connection signal="building_demolished" from="Deconstructor" to="UI" method="_on_deconstructor_building_demolished"]
